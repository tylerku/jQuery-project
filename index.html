<!DOCTYPE html>

<html>
	<head>
		<!--<link rel="stylesheet" type="text/css" href="/css/main.css">-->
		<script src="http://code.jquery.com/jquery-3.2.1.min.js"></script>	
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<!-- Bootstrap library -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<!-- Our custom CSS -->
		<style>
			.ads{
			  text-align: center;
			  margin: .4vw 0;
			  background: green;
			  padding: .4vw;
			}
			body {
				background-color: green;
			}
			.content{
			  margin: .4vw 0;
			  background: lightblue;
			  padding: .4vw;
			}
			.tic-panel{
			  border: solid 2px white;
			  margin: .4vw 0;
			  background: green;
			  padding: .4vw;
			}
			.tic-box{
			  border: solid black 1px;
			  font-size: 5vw;
			  background: #6AB187;
			  text-align: center;
			  color: lavender;
  			  width: 85px;
 			  height: 85px;
			}	
			.tic-box:hover{
			  background: #20948B;
			}
			.center {
				text-align: center;
			}
			.resetButtonContainer {
				margin-top: 3em;
			}
			h1 {
				color: white;
			}
			p {
				color: white;
			}
		</style>
	</head>
	<body>
		<div class="center">
			<h1> Challenge Tic Tac Toe </h1>
			<p>
				Play with a friend and solve javascript challenges before going again.
			</p>
		</div>
		<div class="container-fluid">
			<div class="row">
			  <div class="col-12 col-sm-2 ads"></div>
			  <div class="col-12 col-sm-6 content">
				<div class="container-fluid tic-container">
				  <div class="row tic-row">
					<div id="one" class="col-4 tic-box"> - </div>
					<div id="two" class="col-4 tic-box"> - </div>
					<div id="three" class="col-4 tic-box"> - </div>
				  </div>
				  <div class="row tic-row">
					<div id="four" class="col-4 tic-box"> - </div>
					<div id="five" class="col-4 tic-box"> - </div>
					<div id="six" class="col-4 tic-box"> - </div>
				  </div>
				  <div class="row tic-row">
					<div id="seven" class="col-4 tic-box"> - </div>
					<div id="eight" class="col-4 tic-box"> - </div>
					<div id="nine" class="col-4 tic-box"> - </div>
				  </div>
				</div>
			  </div>
			  <div id="challenge" class="col-12 col-sm-2 tic-panel"> <p>Challenge:</p> </div>
			 <!-- <div class="col-12 col-sm-2 ads"></div>-->
			</div>
		</div>
		<div class="center resetButtonContainer">
			<button type="button" onClick="resetGame()" class="btn btn-outline-dark btn-lg">Reset Game</button>
		</div>
	</body>
	<script>
		var marker = 'X';
		var oneMarked = 'false';
		var twoMarked = 'false';
		var threeMarked = 'false';
		var fourMarked = 'false';
		var fiveMarked = 'false';
		var sixMarked = 'false';
		var sevenMarked = 'false';
		var eightMarked = 'false';
		var nineMarked = 'false';
		var resetGame = function() {
			marker = 'X';
			$('#challenge').html('<p>Challenge:</p>');
			$('#one').html('-');
			$('#two').html('-');
			$('#three').html('-');
			$('#four').html('-');
			$('#five').html('-');
			$('#six').html('-');
			$('#seven').html('-');
			$('#eight').html('-');
			$('#nine').html('-');
		}
		$(document).ready(function() {
			var getChallenge = function(finished) {
				$.ajax({
					url: 'https://api.stackexchange.com/2.2/search?order=desc&sort=activity&intitle=javascript&site=stackoverflow',
					dataType: 'json',
					success: function(res) {
						finished(res);	
					}	
				});
			} 
			var html_pretext = '<p> Before your next turn, answer this javascript question... </p>';
			$('#one').click(function(e){
				var text = $('#one').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#one').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[0].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#two').click(function(e){
				var text = $('#two').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#two').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[1].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#three').click(function(e){
				var text = $('#three').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#three').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[2].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#four').click(function(e){
				var text = $('#four').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#four').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[3].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#five').click(function(e){
				var text = $('#five').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#five').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[10].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#six').click(function(e){
				var text = $('#six').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#six').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[5].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#seven').click(function(e){
				var text = $('#seven').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#seven').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[6].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#eight').click(function(e){
				var text = $('#eight').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#eight').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[7].title + '</p>';
					$('#challenge').html(html);
				});
			})
			$('#nine').click(function(e){
				var text = $('#nine').text();
				if (text == 'X' || text == 'O') {
					alert('Already went in that spot');
					return;
				}
				$('#nine').html(marker);
				marker = marker == 'X' ? 'O' : 'X';
				getChallenge(function(res) {
					var html = html_pretext;
					html += '<p>' + res.items[8].title + '</p>';
					$('#challenge').html(html);
				});
			})
			
		});
	</script>

</html>
